{% extends 'portaladmin/base.html' %}
{% load i18n %}
{% load staticfiles %}
{% block topcontent %}
        <div id="page-wrapper">
            <div class="row">
                <div class="col-lg-12">
                    <h2 class="page-header">Calendar </h2>
                </div>
                <!-- /.col-lg-12 -->
            </div>
{% endblock topcontent %}
{% block botcontent %}
                <div class="col-lg-12">
                    <div class="panel panel-default">
                        <div class="panel-heading">
                             Calendar
                        </div>
                        <!-- /.panel-heading -->
                        <div id='calendar'></div>
                        <!-- /.panel-body -->
                    </div>
                    <!-- /.panel -->
                </div>
                <!-- /.col-lg-12 -->
{% endblock botcontent%}

{% block morescript %}
<script src="{%static "bower_components/moment/min/moment.min.js" %}"></script>
<script src="{%static "bower_components/fullcalendar/dist/fullcalendar.js" %}"></script>
{% endblock morescript %}

{% block scriptcontent %}
<script>
	$(document).ready(function() {
        function saveMyData(event) {
            $.post(
                '/event/save', 
                    {
                        title: event.title,
                        start: event.start,
                        end:   event.end
                    }
                );
         }

	    var calendar = $('#calendar').fullCalendar({
                selectable: true,
                selectHelper: true,
                select: function(start, end, allDay)
                {
                    var title = prompt('Event Title:');
                    if (title)
                    {
                        calendar.fullCalendar('renderEvent',
                            {
                                title: title,
                                start: start,
                                end: end,
                                allDay: allDay
                            },
                            true // make the event "stick"
                        );
                    }
                    calendar.fullCalendar('unselect');
                },
                editable: true,
                 eventDrop: function(calEvent, jsEvent, view) {
                        var method = 'POST';
                        var path = '/test.php';
                        var params = new Array();
                        params['id'] = calEvent.id;
                        params['start'] = calEvent.start;
                         params['end'] = calEvent.end;
                         params['title'] = calEvent.title;
                        post_to_url( path, params, method);
                }
	    })
	});
</script>
{% endblock scriptcontent %}

{% block morecss %}
<link rel="stylesheet" href="{%static "bower_components/fullcalendar/dist/fullcalendar.min.css" %}">
{% endblock morecss %}
