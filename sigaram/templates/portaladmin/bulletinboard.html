{% extends 'portaladmin/base.html' %}
{% load staticfiles %}
{% load i18n %}
{% block topcontent %}
<div class="row">
    <div class="col-lg-12">
        <h2 class="page-header">{% trans "Exam" %}</h2>
    </div>
    <!-- /.col-lg-12 -->
</div>
{% endblock topcontent %}

{% block morecss %}
<link href="{%static "css/plugins/dataTables.bootstrap.css" %}" rel="stylesheet">
<link href="{%static "bower_components/bootstrap3-dialog/dist/css/bootstrap-dialog.css" %}" rel="stylesheet">
<link rel="stylesheet" href="{%static "bower_components/summernote/dist/summernote.css" %}">
<style>
    #addrec:hover, #admin-main-tbl tbody tr:hover{
        cursor: pointer;
    }
    .note-editable{
        height: 80px;
    }
</style>
{% endblock morecss %}


{% block morescript %}
<script src="{%static "js/plugins/dataTables/jquery.dataTables.js" %}"></script>
<script src="{%static "js/plugins/dataTables/dataTables.bootstrap.js" %}"></script>
<script src="{% static "bower_components/bootstrap3-dialog/dist/js/bootstrap-dialog.js" %}"></script>
<script src="{% static "bower_components/jsrender/jsrender.min.js" %}"></script>
<script src="{%static "bower_components/summernote/dist/summernote.min.js" %}"></script>
<script src="{% static "js/tts.utils.js" %}"></script>

{% endblock morescript %}

{% block botcontent %}
<input type="hidden" id="set_rubric_id" name="rub_id" value="" />
<div class="row">
    <div>    
        <label>Select Any Users</label>
        <span>
            <select id="category">
                <option value="admin">Administrator</option>
                <option value="teacher">Teacher</option>
                <option value="schools">Schools</option>
            </select>
        </span>
    </div><br />
</div>
<div class="row">
    <div class="col-lg-8">
        <div class="table-responsive">
            <table class="table table-striped table-bordered table-hover"  id="admin-main-tbl">
                
            </table>
        </div>    
    </div>
</div>

<div class="row">
    <div><input id="uploadurl" type="file" name="uploadurl"></div><br />
    <div class="form-group" class="col-sm-2">
        <label for="folder_name" class="col-sm-2 control-label">{% trans "Title" %}</label>
    </div><br />
    <div class="form-group">
        <textarea class="summernote"></textarea>
    </div>
</div>
<div class="row">
    <div class="form-group" class="col-sm-2">
        <label for="folder_name" class="col-sm-2 control-label">{% trans "Announcement" %}</label>
    </div><br />
    <div class="form-group">
        <textarea class="summernote"></textarea>
    </div>
</div>
{% endblock botcontent%}

{% block scriptcontent %}
<script>
window.TTS = window.TTS || {}
TTS.forms = TTS.forms || {}
TTS.forms.renderadmin = function(data){
    var headers = [
            { "title": "{% trans "Sl No." %}",
              "class": "text-center",
              "data":"id"  
            },
            { "title": "{% trans "First Name" %}" ,
              "data":"firstname"
            },
            { "title": "{% trans "Last name" %}",
              "data":"lastname"
            },     
        ];
    var dataset = [];
    
    var count = 0
    for(var i in data){
        var t = [];
        t.id = "<input type='checkbox' class='case' name='schoolname' id='"+data[i].adminid+"' value='"+data[i].adminid+"' />";
        t.firstname = data[i].firstname;
        t.lastname = data[i].lastname;
        dataset.push(t);
    }
    $('#admin-main-tbl').dataTable({
        "data":     dataset,
        "columns":  headers
    });
    $('#admin-main-tbl').dataTable().fnDestroy();

};

TTS.forms.renderteacher = function(data){
    var headers = [
            { "title": "{% trans "Sl No." %}",
              "class": "text-center",
              "data":"id"  
            },
            { "title": "{% trans "First Name" %}" ,
              "data":"firstname"
            },
            { "title": "{% trans "Last name" %}",
              "data":"lastname"
            },     
        ];
    var dataset = [];
    
    var count = 0
    for(var i in data){
        var t = [];
        t.id = "<input type='checkbox' class='case' name='schoolname' id='"+data[i].teacherid+"' value='"+data[i].teacherid+"' />";
        t.firstname = data[i].firstname;
        t.lastname = data[i].lastname;
        dataset.push(t);
    }
    $('#admin-main-tbl').dataTable({
        "data":     dataset,
        "columns":  headers
    });
    $('#admin-main-tbl').dataTable().fnDestroy();
};

$(document).ready(function(){ 
    $.ajax({
        "url":"/api/admin/admin/?format=json",
        "type":"GET"
    }).done(function(data){
        TTS.forms.renderadmin(data);
    });
    //window.location = 'teacherresourcelist?id='+this.id;
    $('.summernote').summernote();
    $('#category').on('change', function() {
        if ($('#category').val()=='teacher') {
            var url = "/api/admin/teacher/?format=json"
            $.ajax({
                "url":url,
                "type":"GET"
            }).done(function(data){
                TTS.forms.renderteacher(data);
            });

        }
        $('#admin-main-tbl').dataTable().fnDestroy();

    });

});
</script>

{% endblock scriptcontent %}